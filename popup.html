<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkTiles</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container">
        <!-- Header -->
        <div class="popup-header">
            <button id="dashboard-link" class="dashboard-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
                <span>Open LinkTiles</span>
            </button>
        </div>

        <!-- Quick Save Row -->
        <div class="quick-save-row">
            <button id="quick-save-tab-btn" class="btn btn-quick">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                    <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                Quick Save tab
            </button>
            <button id="quick-save-all-btn" class="btn btn-quick">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="6" width="20" height="14" rx="2"></rect>
                    <path d="M2 10h20"></path>
                </svg>
                Save all tabs
            </button>
        </div>

        <!-- Divider -->
        <div class="divider">
            <span>or save to project</span>
        </div>

        <!-- Project Tree -->
        <div class="project-picker">
            <div id="project-tree" class="project-tree">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Page Info (shown when project selected) -->
        <div id="tile-details" class="tile-details hidden">
            <div class="page-info">
                <input type="text" id="tile-name-input" class="page-title-input" placeholder="Page title">
                <div id="tile-url-display" class="page-url"></div>
                <input type="hidden" id="tile-url-input">
            </div>

            <!-- Save Mode Toggle -->
            <div class="save-mode-toggle">
                <button id="save-current-btn" class="mode-btn active">Current page</button>
                <button id="save-all-btn" class="mode-btn">All tabs</button>
            </div>

            <button id="save-button" class="btn btn-primary" disabled>Save</button>
        </div>
    </div>

    <!-- New Project Modal -->
    <div id="project-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">New Project</div>
            <select id="modal-dashboard-select" class="modal-select"></select>
            <input type="text" id="project-name-input" class="modal-input" placeholder="Project name">
            <div class="modal-actions">
                <button id="modal-cancel" class="btn btn-secondary">Cancel</button>
                <button id="create-project-btn" class="btn btn-primary" disabled>Create & Save</button>
            </div>
            <div class="save-mode-toggle modal-save-mode">
                <button id="modal-save-current" class="mode-btn active">Current page</button>
                <button id="modal-save-all" class="mode-btn">All tabs</button>
            </div>
        </div>
    </div>

    <!-- New Dashboard Modal -->
    <div id="dashboard-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">New Space</div>
            <input type="text" id="dashboard-name-input" class="modal-input" placeholder="Space name">
            <div class="modal-actions">
                <button id="dashboard-modal-cancel" class="btn btn-secondary">Cancel</button>
                <button id="create-dashboard-btn" class="btn btn-primary" disabled>Create & Save</button>
            </div>
            <div class="save-mode-toggle modal-save-mode">
                <button id="dashboard-save-current" class="mode-btn active">Current page</button>
                <button id="dashboard-save-all" class="mode-btn">All tabs</button>
            </div>
        </div>
    </div>

    <script src="dexie.min.js"></script>
    <script src="db.js"></script>
    <script src="popup.js"></script>
</body>
</html>
